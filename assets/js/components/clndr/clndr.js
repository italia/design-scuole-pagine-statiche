!function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?t(require("jquery"),require("moment")):t(jQuery,moment)}(function(p,v){var n={events:[],ready:null,extras:null,render:null,moment:null,weekOffset:0,constraints:null,forceSixRows:null,selectedDate:null,doneRendering:null,daysOfTheWeek:null,multiDayEvents:null,startWithMonth:null,dateParameter:"date",template:"<div class='clndr-controls'><div class='clndr-control-button'><span class='clndr-previous-button'>previous</span></div><div class='month'><%= month %> <%= year %></div><div class='clndr-control-button rightalign'><span class='clndr-next-button'>next</span></div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %></tbody></table>",showAdjacentMonths:!0,trackSelectedDate:!1,formatWeekdayHeader:null,adjacentDaysChangeMonth:!1,ignoreInactiveDaysInSelection:null,lengthOfTime:{days:null,interval:1,months:null},clickEvents:{click:null,today:null,nextYear:null,nextMonth:null,nextInterval:null,previousYear:null,onYearChange:null,previousMonth:null,onMonthChange:null,previousInterval:null,onIntervalChange:null},targets:{day:"day",empty:"empty",nextButton:"clndr-next-button",todayButton:"clndr-today-button",previousButton:"clndr-previous-button",nextYearButton:"clndr-next-year-button",previousYearButton:"clndr-previous-year-button"},classes:{past:"past",today:"today",event:"event",inactive:"inactive",selected:"selected",lastMonth:"last-month",nextMonth:"next-month",adjacentMonth:"adjacent-month"}};function e(t,e){this.element=t,this.options=p.extend(!0,{},n,e),this.options.moment&&(v=this.options.moment),this.validateOptions(),this.constraints={next:!0,today:!0,previous:!0,nextYear:!0,previousYear:!0},this.options.events.length&&(this.options.multiDayEvents?this.options.events=this.addMultiDayMomentObjectsToEvents(this.options.events):this.options.events=this.addMomentObjectToEvents(this.options.events)),this.options.lengthOfTime.months||this.options.lengthOfTime.days?this.options.lengthOfTime.months?(this.options.lengthOfTime.days=null,this.options.lengthOfTime.startDate?this.intervalStart=v(this.options.lengthOfTime.startDate).startOf("month"):this.options.startWithMonth?this.intervalStart=v(this.options.startWithMonth).startOf("month"):this.intervalStart=v().startOf("month"),this.intervalEnd=v(this.intervalStart).add(this.options.lengthOfTime.months,"months").subtract(1,"days"),this.month=this.intervalStart.clone()):this.options.lengthOfTime.days&&(this.options.lengthOfTime.startDate?this.intervalStart=v(this.options.lengthOfTime.startDate).startOf("day"):this.intervalStart=v().weekday(this.options.weekOffset).startOf("day"),this.intervalEnd=v(this.intervalStart).add(this.options.lengthOfTime.days-1,"days").endOf("day"),this.month=this.intervalStart.clone()):(this.month=v().startOf("month"),this.intervalStart=v(this.month),this.intervalEnd=v(this.month).endOf("month")),this.options.startWithMonth&&(this.month=v(this.options.startWithMonth).startOf("month"),this.intervalStart=v(this.month),this.intervalEnd=this.options.lengthOfTime.days?v(this.month).add(this.options.lengthOfTime.days-1,"days").endOf("day"):v(this.month).endOf("month")),this.options.constraints&&(this.options.constraints.startDate&&(t=v(this.options.constraints.startDate),this.options.lengthOfTime.days?(this.intervalStart.isBefore(t,"week")&&(this.intervalStart=t.startOf("week")),(this.intervalStart.diff(this.intervalEnd,"days")<this.options.lengthOfTime.days||this.intervalEnd.isBefore(this.intervalStart))&&(this.intervalEnd=v(this.intervalStart).add(this.options.lengthOfTime.days-1,"days").endOf("day"),this.month=this.intervalStart.clone())):(this.intervalStart.isBefore(t,"month")&&(this.intervalStart.set("month",t.month()).set("year",t.year()),this.month.set("month",t.month()).set("year",t.year())),this.intervalEnd.isBefore(t,"month")&&this.intervalEnd.set("month",t.month()).set("year",t.year()))),this.options.constraints.endDate)&&(e=v(this.options.constraints.endDate),this.options.lengthOfTime.days?this.intervalStart.isAfter(e,"week")&&(this.intervalStart=v(e).endOf("week").subtract(this.options.lengthOfTime.days-1,"days").startOf("day"),this.intervalEnd=v(e).endOf("week"),this.month=this.intervalStart.clone()):(this.intervalEnd.isAfter(e,"month")&&(this.intervalEnd.set("month",e.month()).set("year",e.year()),this.month.set("month",e.month()).set("year",e.year())),this.intervalStart.isAfter(e,"month")&&this.intervalStart.set("month",e.month()).set("year",e.year()))),this._defaults=n,this._name="clndr",this.init()}e.prototype.init=function(){var t,e;if(this.daysOfTheWeek=this.options.daysOfTheWeek||[],e=this.options.formatWeekdayHeader||e,!this.options.daysOfTheWeek)for(this.daysOfTheWeek=[],e=this.options.formatWeekdayHeader||function(t){return t.format("dd").charAt(0)},t=0;t<7;t++)this.daysOfTheWeek.push(e(v().weekday(t)));if(this.options.weekOffset&&(this.daysOfTheWeek=this.shiftWeekdayLabels(this.options.weekOffset)),!p.isFunction(this.options.render)){if(this.options.render=null,"undefined"==typeof _)throw new Error("Underscore was not found. Please include underscore.js OR provide a custom render function.");this.compiledClndrTemplate=_.template(this.options.template)}p(this.element).html("<div class='clndr'></div>"),this.calendarContainer=p(".clndr",this.element),this.bindEvents(),this.render(),this.options.ready&&this.options.ready.apply(this,[])},e.prototype.validateOptions=function(){(6<this.options.weekOffset||this.options.weekOffset<0)&&(console.warn("clndr.js: An invalid offset "+this.options.weekOffset+" was provided (must be 0 - 6); using 0 instead."),this.options.weekOffset=0)},e.prototype.shiftWeekdayLabels=function(t){for(var e=this.daysOfTheWeek,n=0;n<t;n++)e.push(e.shift());return e},e.prototype.createDaysObject=function(e,n){var t,s,a,i,o,r,h,l,d=[],c=e.clone();n.diff(e,"days");if(this._currentIntervalStart=e.clone(),this.eventsLastMonth=[],this.eventsNextMonth=[],this.eventsThisInterval=[],this.options.events.length&&(this.eventsThisInterval=p(this.options.events).filter(function(){var t=this._clndrStartDateObject.isAfter(n);return!this._clndrEndDateObject.isBefore(e)&&!t}).toArray(),this.options.showAdjacentMonths)&&(l=e.clone().subtract(1,"months").startOf("month"),r=l.clone().endOf("month"),h=n.clone().add(1,"months").startOf("month"),o=h.clone().endOf("month"),this.eventsLastMonth=p(this.options.events).filter(function(){var t=this._clndrEndDateObject.isBefore(l),e=this._clndrStartDateObject.isAfter(r);return!(t||e)}).toArray(),this.eventsNextMonth=p(this.options.events).filter(function(){var t=this._clndrEndDateObject.isBefore(h),e=this._clndrStartDateObject.isAfter(o);return!(t||e)}).toArray()),!this.options.lengthOfTime.days)if((a=c.weekday()-this.options.weekOffset)<0&&(a+=7),this.options.showAdjacentMonths)for(t=1;t<=a;t++)s=v([e.year(),e.month(),t]).subtract(a,"days"),d.push(this.createDayObject(s,this.eventsLastMonth));else for(t=0;t<a;t++)d.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.lastMonth}));for(i=e.clone();i.isBefore(n)||i.isSame(n,"day");)d.push(this.createDayObject(i.clone(),this.eventsThisInterval)),i.add(1,"days");if(!this.options.lengthOfTime.days)for(;d.length%7!=0;)this.options.showAdjacentMonths?d.push(this.createDayObject(i.clone(),this.eventsNextMonth)):d.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth})),i.add(1,"days");if(this.options.forceSixRows&&42!==d.length)for(;d.length<42;)this.options.showAdjacentMonths?(d.push(this.createDayObject(i.clone(),this.eventsNextMonth)),i.add(1,"days")):d.push(this.calendarDay({classes:this.options.targets.empty+" "+this.options.classes.nextMonth}));return d},e.prototype.createDayObject=function(t,e){for(var n,s,a,i=0,o=v(),r=[],h="",l={isToday:!1,isInactive:!1,isAdjacentMonth:!1},d=(t=!t.isValid()&&t.hasOwnProperty("_d")&&void 0!==t._d?v(t._d):t).clone().endOf("day");i<e.length;i++)s=e[i]._clndrStartDateObject,n=e[i]._clndrEndDateObject,s<=d&&t<=n&&r.push(e[i]);return o.format("YYYY-MM-DD")===t.format("YYYY-MM-DD")&&(h+=" "+this.options.classes.today,l.isToday=!0),t.isBefore(o,"day")&&(h+=" "+this.options.classes.past),r.length&&(h+=" "+this.options.classes.event),this.options.lengthOfTime.days||(this._currentIntervalStart.month()>t.month()?(h+=" "+this.options.classes.adjacentMonth,l.isAdjacentMonth=!0,this._currentIntervalStart.year()===t.year()?h+=" "+this.options.classes.lastMonth:h+=" "+this.options.classes.nextMonth):this._currentIntervalStart.month()<t.month()&&(h+=" "+this.options.classes.adjacentMonth,l.isAdjacentMonth=!0,this._currentIntervalStart.year()===t.year()?h+=" "+this.options.classes.nextMonth:h+=" "+this.options.classes.lastMonth)),this.options.constraints&&(o=v(this.options.constraints.endDate),a=v(this.options.constraints.startDate),this.options.constraints.startDate&&t.isBefore(a)&&(h+=" "+this.options.classes.inactive,l.isInactive=!0),this.options.constraints.endDate)&&t.isAfter(o)&&(h+=" "+this.options.classes.inactive,l.isInactive=!0),!t.isValid()&&t.hasOwnProperty("_d")&&void 0!==t._d&&(t=v(t._d)),a=v(this.options.selectedDate),this.options.selectedDate&&t.isSame(a,"day")&&(h+=" "+this.options.classes.selected),h=(h+=" calendar-day-"+t.format("YYYY-MM-DD"))+(" calendar-dow-"+t.weekday()),this.calendarDay({date:t,day:t.date(),events:r,properties:l,classes:this.options.targets.day+h})},e.prototype.render=function(){var t,e,n,s,a,i,o,r,h={},l=null,d=null,c=this.intervalEnd.clone().add(1,"years"),p=this.intervalStart.clone().subtract(1,"years");if(this.calendarContainer.empty(),this.options.lengthOfTime.days)h={days:e=this.createDaysObject(this.intervalStart.clone(),this.intervalEnd.clone()),months:[],year:null,month:null,eventsLastMonth:[],eventsNextMonth:[],eventsThisMonth:[],extras:this.options.extras,daysOfTheWeek:this.daysOfTheWeek,intervalEnd:this.intervalEnd.clone(),numberOfRows:Math.ceil(e.length/7),intervalStart:this.intervalStart.clone(),eventsThisInterval:this.eventsThisInterval};else if(this.options.lengthOfTime.months){for(n=[],i=[],t=a=0;t<this.options.lengthOfTime.months;t++)o=(r=this.intervalStart.clone().add(t,"months")).clone().endOf("month"),e=this.createDaysObject(r,o),i.push(this.eventsThisInterval),n.push({days:e,month:r});for(t=0;t<n.length;t++)a+=Math.ceil(n[t].days.length/7);h={days:[],year:null,month:null,months:n,eventsThisMonth:[],numberOfRows:a,extras:this.options.extras,intervalEnd:this.intervalEnd,intervalStart:this.intervalStart,daysOfTheWeek:this.daysOfTheWeek,eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,eventsThisInterval:i}}else h={days:e=this.createDaysObject(this.month.clone().startOf("month"),this.month.clone().endOf("month")),months:[],intervalEnd:null,intervalStart:null,year:this.month.year(),eventsThisInterval:null,extras:this.options.extras,month:this.month.format("MMMM"),daysOfTheWeek:this.daysOfTheWeek,eventsLastMonth:this.eventsLastMonth,eventsNextMonth:this.eventsNextMonth,numberOfRows:Math.ceil(e.length/7),eventsThisMonth:this.eventsThisInterval};if(this.options.render?this.calendarContainer.html(this.options.render.apply(this,[h])):this.calendarContainer.html(this.compiledClndrTemplate(h)),this.options.constraints){for(s in this.options.targets)"day"!==s&&this.element.find("."+this.options.targets[s]).toggleClass(this.options.classes.inactive,!1);for(t in this.constraints)this.constraints[t]=!0;this.options.constraints.startDate&&(d=v(this.options.constraints.startDate)),this.options.constraints.endDate&&(l=v(this.options.constraints.endDate)),d&&(d.isAfter(this.intervalStart)||d.isSame(this.intervalStart,"day"))&&(this.element.find("."+this.options.targets.previousButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previous=!this.constraints.previous),l&&(l.isBefore(this.intervalEnd)||l.isSame(this.intervalEnd,"day"))&&(this.element.find("."+this.options.targets.nextButton).toggleClass(this.options.classes.inactive,!0),this.constraints.next=!this.constraints.next),d&&d.isAfter(p)&&(this.element.find("."+this.options.targets.previousYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.previousYear=!this.constraints.previousYear),l&&l.isBefore(c)&&(this.element.find("."+this.options.targets.nextYearButton).toggleClass(this.options.classes.inactive,!0),this.constraints.nextYear=!this.constraints.nextYear),(d&&d.isAfter(v(),"month")||l&&l.isBefore(v(),"month"))&&(this.element.find("."+this.options.targets.today).toggleClass(this.options.classes.inactive,!0),this.constraints.today=!this.constraints.today)}this.options.doneRendering&&this.options.doneRendering.apply(this,[])},e.prototype.bindEvents=function(){var t,s=this,a=p(this.element),e=this.options.targets,i=s.options.classes,n=(!0===this.options.useTouchEvents?"touchstart":"click")+".clndr";a.off(n,"."+e.day).off(n,"."+e.empty).off(n,"."+e.nextButton).off(n,"."+e.todayButton).off(n,"."+e.previousButton).off(n,"."+e.nextYearButton).off(n,"."+e.previousYearButton),a.on(n,"."+e.day,function(t){function e(){if(s.options.adjacentDaysChangeMonth)return n.is("."+i.lastMonth)?(s.backActionWithContext(s),!0):n.is("."+i.nextMonth)?(s.forwardActionWithContext(s),!0):void 0}var n=p(t.currentTarget);!s.options.trackSelectedDate||s.options.ignoreInactiveDaysInSelection&&n.hasClass(i.inactive)?e():!0!==e()&&(s.options.selectedDate=s.getTargetDateString(t.currentTarget),a.find("."+i.selected).removeClass(i.selected),n.addClass(i.selected)),s.options.clickEvents.click&&(t=s.buildTargetObject(t.currentTarget,!0),s.options.clickEvents.click.apply(s,[t]))}),a.on(n,"."+e.empty,function(t){var e=p(t.currentTarget);s.options.clickEvents.click&&(t=s.buildTargetObject(t.currentTarget,!1),s.options.clickEvents.click.apply(s,[t])),s.options.adjacentDaysChangeMonth&&(e.is("."+i.lastMonth)?s.backActionWithContext(s):e.is("."+i.nextMonth)&&s.forwardActionWithContext(s))}),a.on(n,"."+e.todayButton,t={context:this},this.todayAction).on(n,"."+e.nextButton,t,this.forwardAction).on(n,"."+e.previousButton,t,this.backAction).on(n,"."+e.nextYearButton,t,this.nextYearAction).on(n,"."+e.previousYearButton,t,this.previousYearAction)},e.prototype.buildTargetObject=function(t,e){var n,s,a={date:null,events:[],element:t};return e&&(n=this.getTargetDateString(t),a.date=n?v(n):null,this.options.events)&&(e=this.options.multiDayEvents?(s=a.date.clone().endOf("day"),function(){return this._clndrStartDateObject<=s&&a.date<=this._clndrEndDateObject}):function(){return n===this._clndrStartDateObject.format("YYYY-MM-DD")},a.events=p.makeArray(p(this.options.events).filter(e))),a},e.prototype.getTargetDateString=function(t){var e=t.className.indexOf("calendar-day-");return-1!==e?t.className.substring(e+13,e+23):null},e.prototype.triggerEvents=function(t,e){var n=[v(t.month)],s=t.options.lengthOfTime,a=t.options.clickEvents,i={end:t.intervalEnd,start:t.intervalStart},o=[v(t.intervalStart),v(t.intervalEnd)],r=i.start.isAfter(e.start)&&(1===Math.abs(i.start.month()-e.start.month())||11===e.start.month()&&0===i.start.month()),h=i.start.isBefore(e.start)&&(1===Math.abs(e.start.month()-i.start.month())||0===e.start.month()&&11===i.start.month()),l=i.start.month()!==e.start.month()||i.start.year()!==e.start.year(),d=i.start.year()-e.start.year()==1||i.end.year()-e.end.year()==1,c=e.start.year()-i.start.year()==1||e.end.year()-i.end.year()==1,p=i.start.year()!==e.start.year();s.days||s.months?(s=i.start.isAfter(e.start),i=i.start.isBefore(e.start),e=s||i,s&&a.nextInterval&&a.nextInterval.apply(t,o),i&&a.previousInterval&&a.previousInterval.apply(t,o),e&&a.onIntervalChange&&a.onIntervalChange.apply(t,o)):(r&&a.nextMonth&&a.nextMonth.apply(t,n),h&&a.previousMonth&&a.previousMonth.apply(t,n),l&&a.onMonthChange&&a.onMonthChange.apply(t,n),d&&a.nextYear&&a.nextYear.apply(t,n),c&&a.previousYear&&a.previousYear.apply(t,n),p&&a.onYearChange&&a.onYearChange.apply(t,n))},e.prototype.back=function(t){var e=arguments[1]||this,n=e.options.lengthOfTime,s={end:e.intervalEnd.clone(),start:e.intervalStart.clone()};return t=p.extend(!0,{},{withCallbacks:!1},t),e.constraints.previous&&(n.days?(e.intervalStart.subtract(n.interval,"days").startOf("day"),e.intervalEnd=e.intervalStart.clone().add(n.days-1,"days").endOf("day")):(e.intervalStart.subtract(n.interval,"months").startOf("month"),e.intervalEnd=e.intervalStart.clone().add(n.months||n.interval,"months").subtract(1,"days").endOf("month")),e.month=e.intervalStart.clone(),e.render(),t.withCallbacks)&&e.triggerEvents(e,s),e},e.prototype.backAction=function(t){t=t.data.context;t.backActionWithContext(t)},e.prototype.backActionWithContext=function(t){t.back({withCallbacks:!0},t)},e.prototype.previous=function(t){return this.back(t)},e.prototype.forward=function(t){var e=arguments[1]||this,n=e.options.lengthOfTime,s={end:e.intervalEnd.clone(),start:e.intervalStart.clone()};return t=p.extend(!0,{},{withCallbacks:!1},t),e.constraints.next&&(e.options.lengthOfTime.days?(e.intervalStart.add(n.interval,"days").startOf("day"),e.intervalEnd=e.intervalStart.clone().add(n.days-1,"days").endOf("day")):(e.intervalStart.add(n.interval,"months").startOf("month"),e.intervalEnd=e.intervalStart.clone().add(n.months||n.interval,"months").subtract(1,"days").endOf("month")),e.month=e.intervalStart.clone(),e.render(),t.withCallbacks)&&e.triggerEvents(e,s),e},e.prototype.forwardAction=function(t){t=t.data.context;t.forwardActionWithContext(t)},e.prototype.forwardActionWithContext=function(t){t.forward({withCallbacks:!0},t)},e.prototype.next=function(t){return this.forward(t)},e.prototype.previousYear=function(t){var e=arguments[1]||this,n={end:e.intervalEnd.clone(),start:e.intervalStart.clone()};return t=p.extend(!0,{},{withCallbacks:!1},t),e.constraints.previousYear&&(e.month.subtract(1,"year"),e.intervalStart.subtract(1,"year"),e.intervalEnd.subtract(1,"year"),e.render(),t.withCallbacks)&&e.triggerEvents(e,n),e},e.prototype.previousYearAction=function(t){t.data.context.previousYear({withCallbacks:!0},t.data.context)},e.prototype.nextYear=function(t){var e=arguments[1]||this,n={end:e.intervalEnd.clone(),start:e.intervalStart.clone()};return t=p.extend(!0,{},{withCallbacks:!1},t),e.constraints.nextYear&&(e.month.add(1,"year"),e.intervalStart.add(1,"year"),e.intervalEnd.add(1,"year"),e.render(),t.withCallbacks)&&e.triggerEvents(e,n),e},e.prototype.nextYearAction=function(t){t.data.context.nextYear({withCallbacks:!0},t.data.context)},e.prototype.today=function(t){var e=arguments[1]||this,n=e.options.lengthOfTime,s={end:e.intervalEnd.clone(),start:e.intervalStart.clone()};t=p.extend(!0,{},{withCallbacks:!1},t),e.month=v().startOf("month"),n.days?(n.startDate?e.intervalStart=v().weekday(n.startDate.weekday()).startOf("day"):e.intervalStart=v().weekday(0).startOf("day"),e.intervalEnd=e.intervalStart.clone().add(n.days-1,"days").endOf("day")):(e.intervalStart=v().startOf("month"),e.intervalEnd=e.intervalStart.clone().add(n.months||n.interval,"months").subtract(1,"days").endOf("month")),e.intervalStart.isSame(s.start)&&e.intervalEnd.isSame(s.end)||e.render(),t.withCallbacks&&(e.options.clickEvents.today&&e.options.clickEvents.today.apply(e,[v(e.month)]),e.triggerEvents(e,s))},e.prototype.todayAction=function(t){t.data.context.today({withCallbacks:!0},t.data.context)},e.prototype.setMonth=function(t,e){var n=this.options.lengthOfTime,s={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return n.days||n.months?console.warn("clndr.js: You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."):(this.month.month(t),this.intervalStart=this.month.clone().startOf("month"),this.intervalEnd=this.intervalStart.clone().endOf("month"),this.render(),e&&e.withCallbacks&&this.triggerEvents(this,s)),this},e.prototype.setYear=function(t,e){var n={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return this.month.year(t),this.intervalEnd.year(t),this.intervalStart.year(t),this.render(),e&&e.withCallbacks&&this.triggerEvents(this,n),this},e.prototype.setIntervalStart=function(t,e){var n=this.options.lengthOfTime,s={end:this.intervalEnd.clone(),start:this.intervalStart.clone()};return n.days||n.months?(n.days?(this.intervalStart=v(t).startOf("day"),this.intervalEnd=this.intervalStart.clone().add(n.days-1,"days").endOf("day")):(this.intervalStart=v(t).startOf("month"),this.intervalEnd=this.intervalStart.clone().add(n.months||n.interval,"months").subtract(1,"days").endOf("month")),this.month=this.intervalStart.clone(),this.render(),e&&e.withCallbacks&&this.triggerEvents(this,s)):console.warn("clndr.js: You are using a custom date interval. Use Clndr.setIntervalStart(startDate) instead."),this},e.prototype.setExtras=function(t){return this.options.extras=t,this.render(),this},e.prototype.setEvents=function(t){return this.options.multiDayEvents?this.options.events=this.addMultiDayMomentObjectsToEvents(t):this.options.events=this.addMomentObjectToEvents(t),this.render(),this},e.prototype.addEvents=function(t){var e=!(1<arguments.length)||arguments[1];return this.options.multiDayEvents?this.options.events=p.merge(this.options.events,this.addMultiDayMomentObjectsToEvents(t)):this.options.events=p.merge(this.options.events,this.addMomentObjectToEvents(t)),e&&this.render(),this},e.prototype.removeEvents=function(t){for(var e=this.options.events.length-1;0<=e;e--)!0===t(this.options.events[e])&&this.options.events.splice(e,1);return this.render(),this},e.prototype.addMomentObjectToEvents=function(t){for(var e=0;e<t.length;e++)t[e]._clndrStartDateObject=v(t[e][this.options.dateParameter]),t[e]._clndrEndDateObject=v(t[e][this.options.dateParameter]);return t},e.prototype.addMultiDayMomentObjectsToEvents=function(t){for(var e,n,s=0,a=this.options.multiDayEvents;s<t.length;s++)e=t[s][a.endDate],n=t[s][a.startDate],e||n?(t[s]._clndrEndDateObject=v(e||n),t[s]._clndrStartDateObject=v(n||e)):(t[s]._clndrEndDateObject=v(t[s][a.singleDay]),t[s]._clndrStartDateObject=v(t[s][a.singleDay]));return t},e.prototype.calendarDay=function(t){var e={day:"",date:null,events:[],classes:this.options.targets.empty};return p.extend({},e,t)},e.prototype.destroy=function(){var t=p(this.calendarContainer);t.parent().data("plugin_clndr",null),t.empty().remove(),this.options=n,this.element=null},p.fn.clndr=function(t){if(1<this.length)throw new Error("CLNDR does not support multiple elements yet. Make sure your clndr selector returns only one element.");if(this.length)return this.data("plugin_clndr")?this.data("plugin_clndr"):(t=new e(this,t),this.data("plugin_clndr",t),t);throw new Error("CLNDR cannot be instantiated on an empty selector.")}});